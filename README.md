# Kniga - Читалка для Android

## Описание

**Kniga** — это современное мобильное приложение для чтения электронных книг на Android с облачной библиотекой и синхронизацией. Приложение предоставляет полный набор инструментов для комфортного чтения, управления библиотекой и отслеживания прогресса.

## Скриншоты приложения

Интерфейс приложения доступен для просмотра по ссылкам:
- [Главный экран библиотеки](https://github.com/user-attachments/assets/a856b4db-ee19-478a-b9dc-fcfc9488e8b5)
- [Экран чтения книги](https://github.com/user-attachments/assets/850e7b03-0a11-436e-b90c-85f5128cb199)
- [Облачная библиотека](https://github.com/user-attachments/assets/94d02373-a814-4ab8-9595-5b97abd581c0)

## Основные возможности

### Функции чтения
- **Поддержка форматов** — PDF, EPUB, FB2, MOBI, TXT
- **Цветовые темы** — три варианта оформления (Светлая, Темная, Сепия)
- **Настройка шрифта** — изменение размера текста для комфортного чтения
- **Навигация свайпами** — удобное перелистывание страниц
- **Автосохранение прогресса** — автоматическое сохранение позиции чтения

### Библиотека
- **Импорт книг** — загрузка книг из файловой системы устройства
- **Избранное** — быстрый доступ к любимым книгам
- **Фильтрация** — категории (Все, Читаю, Завершено, Избранное)
- **Прогресс чтения** — визуальное отображение прочитанного процента
- **Управление коллекцией** — добавление, удаление и организация книг

### Облачная библиотека
- **Загрузка в облако** — размещение книг в общем хранилище
- **Общий доступ** — доступ к книгам со всех аккаунтов
- **Скачивание** — загрузка книг из облачной библиотеки
- **Контроль доступа** — удаление доступно только загрузившему пользователю
- **Дедупликация** — автоматическое определение одинаковых файлов

### Статистика
- **Прочитанные книги** — подсчет завершенных произведений
- **Время чтения** — отслеживание общего времени за книгами
- **Количество страниц** — статистика прочитанных страниц
- **Серия чтения** — отображение дней чтения подряд

## Технологический стек

### Платформа
- **Язык программирования** — Kotlin
- **Минимальная версия** — Android 7.0 (API 24)
- **UI Framework** — Jetpack Compose + Material3
- **База данных** — Room Database (версия 4)

### Архитектура
- **Паттерн** — MVVM + Repository Pattern
- **Асинхронность** — Kotlin Coroutines + Flow
- **Парсеры книг** — PDFBox, EpubLib для обработки различных форматов

## Основные компоненты

### База данных (Room)
- **Book** — таблица книг в локальной библиотеке
- **CloudBook** — таблица книг в облачном хранилище
- **ReadingProgress** — прогресс чтения для каждой книги
- **ReadingSession** — сессии чтения для статистики
- **User** — пользователи системы
- **Bookmark, Highlight** — закладки и выделения текста

### Репозитории
- **BookRepository** — управление локальной библиотекой
- **CloudSyncRepository** — синхронизация с облачной библиотекой
- **ReadingSessionRepository** — сбор и анализ статистики чтения

## Установка и запуск

### Системные требования
- Android Studio Hedgehog или новее
- JDK 17+
- Android SDK 24+
- Устройство или эмулятор с Android 7.0+

### Быстрый старт

#### Клонирование репозитория

```bash
git clone https://github.com/Sunder32/Kniga.git
cd Kniga
```

#### Открытие в Android Studio

1. Запустите Android Studio
2. Выберите File → Open
3. Укажите папку проекта
4. Дождитесь завершения синхронизации Gradle

#### Сборка APK

```bash
.\gradlew assembleDebug
```

#### Установка на устройство

```bash
adb install app\build\outputs\apk\debug\app-debug.apk
```

## Использование приложения

### Импорт книг в библиотеку

1. Откройте приложение Kniga
2. Нажмите кнопку добавления в правом нижнем углу
3. Выберите файл книги из файловой системы (PDF, EPUB, FB2, MOBI, TXT)
4. Книга автоматически появится в вашей библиотеке

### Чтение книги

1. Нажмите на обложку книги в библиотеке
2. Листайте страницы свайпами влево или вправо
3. Нажмите на центр экрана для отображения элементов управления
4. Используйте кнопку настроек для изменения темы и размера шрифта

### Добавление в избранное

1. Найдите нужную книгу в библиотеке
2. Нажмите на иконку сердца на карточке книги
3. Книга будет добавлена в категорию "Избранное"
4. Используйте фильтр "Избранное" для быстрого доступа к любимым книгам

### Работа с облачной библиотекой

1. Перейдите на вкладку "Облако"
2. Выполните долгое нажатие на книге из локальной библиотеки
3. Выберите опцию "Загрузить в облако"
4. Книга станет доступна всем пользователям приложения
5. Скачивайте книги других пользователей из облачного хранилища

### Просмотр статистики

1. Откройте меню статистики в приложении
2. Просмотрите следующие данные:
   - Количество прочитанных книг
   - Общее время, проведенное за чтением
   - Серию чтения (количество дней подряд)

## Разработка

### Синхронизация зависимостей

После изменения зависимостей выполните команду:

```bash
./gradlew --refresh-dependencies
```

### Сборка приложения

```bash
# Debug версия
./gradlew assembleDebug

# Release версия
./gradlew assembleRelease
```

### Тестирование

```bash
# Unit тесты
./gradlew test

# Инструментальные тесты
./gradlew connectedAndroidTest
```

## Архитектура приложения

### Offline-First подход

Приложение использует архитектурный подход Offline-First, что обеспечивает работу без постоянного интернет-соединения.

### Структура архитектуры

```
┌─────────────────┐
│   Presentation  │  (Jetpack Compose UI)
│   + ViewModels  │
└────────┬────────┘
         │
┌────────▼────────┐
│   Repository    │  (Бизнес-логика)
└────────┬────────┘
         │
    ┌────┴────┐
    │         │
┌───▼──┐  ┌──▼────┐
│ Room │  │ Cloud │  (Источники данных)
│  DB  │  │  Sync │
└──────┘  └───────┘
```

## Текущая версия: 1.0.4

### Реализованный функционал
- Чтение книг форматов PDF, EPUB, FB2, MOBI, TXT
- Библиотека с системой фильтрации
- Добавление книг в избранное
- Облачная библиотека с общим доступом
- Статистика чтения и прогресса
- Три цветовые темы оформления
- Настройки интерфейса читалки
- Автоматическое сохранение прогресса

## Лицензия

Этот проект распространяется под лицензией MIT. См. файл LICENSE для деталей.

## Контакты

- **GitHub** - Sunder32
- **Repository** - [Kniga](https://github.com/Sunder32/Kniga)

---

**Версия:** 1.0.4  
**Дата обновления:** 18 октября 2025  
**Статус:** Стабильная версия
